<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUỔI 18: Builder & Prototype Pattern</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --info: #17a2b8;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: var(--primary);
            color: white;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .content-wrapper {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 80vh;
        }

        .sidebar {
            background: var(--light);
            padding: 20px;
            border-right: 3px solid var(--secondary);
        }

        .nav-list {
            list-style: none;
            position: sticky;
            top: 20px;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--secondary);
            color: white;
            transform: translateX(5px);
            border-color: var(--secondary);
        }

        .main-content {
            padding: 30px;
            overflow-y: auto;
            max-height: 80vh;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            color: var(--accent);
            margin: 25px 0 15px;
            padding-left: 15px;
            border-left: 4px solid var(--accent);
        }

        h4 {
            color: var(--info);
            margin: 20px 0 10px;
        }

        h5 {
            color: var(--dark);
            margin: 15px 0 8px;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        ul,
        ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin-bottom: 8px;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.4;
            border: 2px solid #444;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: #888;
            font-size: 0.9rem;
        }

        .copy-btn {
            background: #555;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .keyword {
            color: #569cd6;
        }

        .string {
            color: #ce9178;
        }

        .comment {
            color: #6a9955;
        }

        .number {
            color: #b5cea8;
        }

        .class-name {
            color: #4ec9b0;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        th {
            background: var(--secondary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .note {
            background: #fff3cd;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid var(--info);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid var(--success);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .interactive-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
        }

        .btn-run {
            background: var(--success);
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            background: white;
            border-left: 4px solid var(--warning);
            display: none;
        }

        .result.active {
            display: block;
        }

        .result-content {
            font-family: 'Consolas', 'Monaco', monospace;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border: 1px solid #e9ecef;
            white-space: pre-wrap;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-top: 4px solid var(--secondary);
        }

        .comparison-card h4 {
            color: var(--primary);
            margin-top: 0;
        }

        footer {
            text-align: center;
            padding: 20px;
            background: var(--primary);
            color: white;
        }

        @media (max-width: 768px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }

            .sidebar {
                border-right: none;
                border-bottom: 3px solid var(--secondary);
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .pattern-diagram {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 2px dashed #ddd;
        }

        .pattern-diagram i {
            font-size: 48px;
            color: var(--secondary);
            margin: 10px;
        }

        .pattern-steps {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .pattern-step {
            background: white;
            border-radius: 8px;
            padding: 15px;
            width: 150px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--light);
        }

        .pattern-step-number {
            background: var(--secondary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
        }

        .method-chain {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Consolas', monospace;
            border-left: 4px solid var(--info);
        }

        .method-chain .method {
            color: var(--secondary);
            font-weight: bold;
        }

        .copy-vs-deep {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .copy-type {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .copy-type.shallow {
            border-top: 4px solid var(--warning);
        }

        .copy-type.deep {
            border-top: 4px solid var(--success);
        }

        @media (max-width: 768px) {
            .copy-vs-deep {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-tools"></i> BUỔI 18: Builder & Prototype Pattern</h1>
        </header>

        <div class="content-wrapper">
            <nav class="sidebar">
                <ul class="nav-list">
                    <li class="nav-item"><a href="#intro" class="nav-link active"><i class="fas fa-home"></i> Giới
                            thiệu</a></li>
                    <li class="nav-item"><a href="#builder-intro" class="nav-link"><i class="fas fa-building"></i>
                            Builder Pattern</a></li>
                    <li class="nav-item"><a href="#builder-problem" class="nav-link"><i
                                class="fas fa-exclamation-triangle"></i> Vấn đề không dùng Builder</a></li>
                    <li class="nav-item"><a href="#builder-example" class="nav-link"><i class="fas fa-code"></i>
                            Builder Java core</a></li>
                    <li class="nav-item"><a href="#builder-example2" class="nav-link"><i class="fas fa-code"></i>
                            Builder class riêng</a></li>
                    <li class="nav-item"><a href="#prototype-intro" class="nav-link"><i class="fas fa-clone"></i>
                            Prototype Pattern</a></li>
                    <li class="nav-item"><a href="#prototype-example" class="nav-link"><i class="fas fa-copy"></i> Ví dụ
                            Prototype</a></li>
                    <li class="nav-item"><a href="#comparison" class="nav-link"><i class="fas fa-balance-scale"></i> So
                            sánh Pattern</a></li>
                </ul>
            </nav>

            <main class="main-content">
                <!-- PHẦN GIỚI THIỆU -->
                <section id="intro" class="section active">
                    <h2><i class="fas fa-home"></i> CHƯƠNG 5 – DESIGN PATTERNS CƠ BẢN</h2>

                    <h3>BUILDER & PROTOTYPE</h3>
                    <div style="display: flex; justify-content: center;"><img style="width: 60%; "
                            src="../img//e69bba3d-15f2-44fd-80db-dcf561497cce-md.jpeg" alt=""></div>
                    <!-- <div class="pattern-diagram">
                        <i class="fas fa-cogs"></i>
                        <h4>Hai Creational Pattern Quan Trọng</h4>
                        <p>Học cách tạo đối tượng linh hoạt với Builder và hiệu quả với Prototype</p>
                    </div> -->

                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4><i class="fas fa-building"></i> Builder Pattern</h4>
                            <p><strong>Mục đích:</strong> Tạo đối tượng phức tạp theo từng bước</p>
                            <ul>
                                <li>Không cần constructor nhiều tham số</li>
                                <li>Code dễ đọc, dễ bảo trì</li>
                                <li>Linh hoạt trong việc tạo đối tượng</li>
                            </ul>
                        </div>

                        <div class="comparison-card">
                            <h4><i class="fas fa-clone"></i> Prototype Pattern</h4>
                            <p><strong>Mục đích:</strong> Tạo đối tượng mới bằng cách sao chép</p>
                            <ul>
                                <li>Clone từ đối tượng đã tồn tại</li>
                                <li>Hiệu quả khi tạo object tốn tài nguyên</li>
                                <li>Tạo nhiều object giống nhau nhanh chóng</li>
                            </ul>
                        </div>
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-lightbulb"></i> Tại sao học hai pattern này?</h4>
                        <p>Builder và Prototype giải quyết hai vấn đề khác nhau trong việc tạo đối tượng:</p>
                        <ol>
                            <li><strong>Builder</strong> - Khi đối tượng có nhiều thuộc tính, không phải lúc nào cũng
                                cần set hết</li>
                            <li><strong>Prototype</strong> - Khi cần tạo nhiều đối tượng giống nhau, clone nhanh hơn new
                            </li>
                        </ol>
                    </div>
                </section>

                <!-- PHẦN BUILDER PATTERN -->
                <section id="builder-intro" class="section">
                    <h2><i class="fas fa-building"></i> I. BUILDER PATTERN</h2>

                    <h3>1. Builder Pattern là gì?</h3>
                    <p><strong>Builder Pattern</strong> là một Creational Pattern dùng để:</p>
                    <ul>
                        <li>Tạo ra đối tượng phức tạp theo từng bước</li>
                        <li>Không cần constructor quá nhiều tham số</li>
                        <li>Giúp code dễ đọc, dễ bảo trì, tránh lỗi</li>
                    </ul>

                    <div class="pattern-diagram">
                        <i class="fas fa-building"></i>
                        <h4>Builder Pattern: "Xây dựng từng bước"</h4>
                        <p>Tạo object phức tạp một cách linh hoạt và rõ ràng</p>
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-comment"></i> Hiểu đơn giản:</h4>
                        <p><strong>Object có nhiều thuộc tính + Không phải lúc nào cũng dùng hết = Builder giúp tạo
                                object dễ đọc – dễ dùng – tránh lỗi</strong></p>
                    </div>

                    <h3>2. Khi nào nên dùng Builder?</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Trường hợp</th>
                                    <th>Lý do</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Object có nhiều thuộc tính</strong></td>
                                    <td>Constructor dài, khó đọc</td>
                                </tr>
                                <tr>
                                    <td><strong>Thuộc tính không bắt buộc</strong></td>
                                    <td>Không cần set hết tất cả thuộc tính</td>
                                </tr>
                                <tr>
                                    <td><strong>Cần code dễ đọc, dễ bảo trì</strong></td>
                                    <td>Builder method chain rõ ràng</td>
                                </tr>
                                <tr>
                                    <td><strong>Object immutable</strong></td>
                                    <td>Muốn object không thay đổi sau khi tạo</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>3. Cấu trúc Builder Pattern</h3>
                    <div class="pattern-steps">
                        <div class="pattern-step">
                            <div class="pattern-step-number">1</div>
                            <strong>Product</strong>
                            <p>Object cần tạo</p>
                        </div>
                        <div class="pattern-step">
                            <div class="pattern-step-number">2</div>
                            <strong>Builder</strong>
                            <p>Interface xây dựng</p>
                        </div>
                        <div class="pattern-step">
                            <div class="pattern-step-number">3</div>
                            <strong>ConcreteBuilder</strong>
                            <p>Builder cụ thể</p>
                        </div>
                        <div class="pattern-step">
                            <div class="pattern-step-number">4</div>
                            <strong>Director (tuỳ chọn)</strong>
                            <p>Điều khiển xây dựng</p>
                        </div>
                    </div>
                </section>

                <!-- PHẦN VẤN ĐỀ KHÔNG DÙNG BUILDER -->
                <section id="builder-problem" class="section">
                    <h2><i class="fas fa-exclamation-triangle"></i> VẤN ĐỀ KHI KHÔNG DÙNG BUILDER</h2>

                    <h3>2. Vấn đề khi KHÔNG dùng Builder</h3>

                    <div class="code-block">
                        <div class="code-header">
                            <span>Constructor nhiều tham số - Code xấu</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="class-name">User</span> user = <span class="keyword">new</span> <span
                            class="class-name">User</span>(<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"manh"</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"123456"</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"manh@gmail.com"</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="number">20</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"Ha Noi"</span>,<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"ADMIN"</span><br>
                        );
                    </div>

                    <div class="warning-box">
                        <h4><i class="fas fa-times-circle"></i> Vấn đề với constructor nhiều tham số:</h4>
                        <ul>
                            <li><strong>Rất khó nhớ thứ tự</strong> các tham số</li>
                            <li><strong>Dễ truyền nhầm giá trị</strong> (tuổi thành địa chỉ)</li>
                            <li><strong>Code khó đọc</strong>, khó bảo trì</li>
                            <li>Khi thêm thuộc tính mới → phải sửa tất cả chỗ gọi constructor</li>
                            <li>Không thể bỏ qua thuộc tính không cần thiết</li>
                        </ul>
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-play-circle"></i> Thử tạo User không dùng Builder</h4>
                        <p>Giả sử bạn cần tạo User với 6 thuộc tính. Hãy thử nhớ thứ tự:</p>
                        <div class="input-group">
                            <label>Thứ tự đúng là gì?</label>
                            <select id="constructorOrder">
                                <option value="">Chọn thứ tự</option>
                                <option value="correct">username, password, email, age, address, role</option>
                                <option value="wrong1">username, email, password, age, address, role</option>
                                <option value="wrong2">username, password, age, email, address, role</option>
                            </select>
                        </div>
                        <button class="btn" onclick="checkConstructorOrder()">
                            <i class="fas fa-check"></i> Kiểm tra
                        </button>
                        <div class="result" id="constructorResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="constructorResultContent"></div>
                        </div>
                    </div>
                </section>

                <!-- PHẦN VÍ DỤ BUILDER -->
                <section id="builder-example" class="section">
                    <h2><i class="fas fa-code"></i> VÍ DỤ BUILDER PATTERN CHI TIẾT</h2>

                    <h3>5. Builder Pattern – Ví dụ chi tiết</h3>
                    <p><strong>Ví dụ:</strong> Tạo đối tượng User với nhiều thuộc tính</p>
                    <p><b>Dùng khi:</b></p>
                    <ul>
                        <li>Chỉ có 1 class</li>
                        <li>Không có kế thừa</li>
                        <li>Không cần Factory</li>
                    </ul>
                    <h4>5.1. Lớp Product (User.java)</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>User.java - Lớp Product</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">User</span> {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String username;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String password;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String email;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> <span class="keyword">int</span>
                        age;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String address;<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Constructor private - chỉ Builder có thể
                            gọi</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> <span
                            class="class-name">User</span>(Builder builder) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.username =
                        builder.username;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.password =
                        builder.password;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.email =
                        builder.email;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.age =
                        builder.age;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.address =
                        builder.address;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Getter methods...</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> String getUsername() { <span
                            class="keyword">return</span> username; }<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> String getEmail() { <span
                            class="keyword">return</span> email; }<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// ... các getter khác</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Builder class (inner class)</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static class</span> <span
                            class="class-name">Builder</span> {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String
                        username;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String
                        password;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String
                        email;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> <span
                            class="keyword">int</span> age;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String
                        address;<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Các method build từng
                            bước (fluent interface)</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">Builder</span> username(String username) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">this</span>.username = username;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">return this</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">Builder</span> password(String password) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">this</span>.password = password;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">return this</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">Builder</span> email(String email) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">this</span>.email = email;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">return this</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">Builder</span> age(<span class="keyword">int</span> age) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">this</span>.age = age;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">return this</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">Builder</span> address(String address) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">this</span>.address = address;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">return this</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Method build() cuối
                            cùng</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">User</span> build() {<br>
                        <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Có thể validate ở đây</span><br> -->
                        <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> (username == <span class="keyword">null</span> || password == <span class="keyword">null</span>) {<br> -->
                        <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">throw new</span> IllegalArgumentException(<span class="string">"Username và password là bắt buộc"</span>);<br> -->
                        <!-- &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br> -->
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
                            class="keyword">return new</span> <span class="class-name">User</span>(<span
                            class="keyword">this</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-info-circle"></i> Giải thích:</h4>
                        <p><strong>Mỗi method trong Builder:</strong></p>
                        <ol>
                            <li>Gán giá trị cho thuộc tính</li>
                            <li>Trả về <code>this</code> (chính builder)</li>
                            <li>Giúp chain method: gọi liên tiếp các method</li>
                        </ol>
                        <div class="method-chain">
                            <span class="method">.username()</span> → <span class="method">.password()</span> → <span
                                class="method">.email()</span> → <span class="method">.build()</span>
                        </div>
                    </div>

                    <h3>6. Sử dụng Builder Pattern</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Main.java - Sử dụng Builder</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Main</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args)
                        {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Tạo User với Builder -
                            cực kỳ dễ đọc!</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">User</span> user =
                        <span class="keyword">new</span> <span class="class-name">User</span>.Builder()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.username(<span
                            class="string">"manh"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.password(<span
                            class="string">"123456"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.email(<span
                            class="string">"manh@gmail.com"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.age(<span
                            class="number">20</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.address(<span
                            class="string">"Ha Noi"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Tạo
                            user thành công: "</span> + user.getUsername());<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Có thể bỏ qua một số
                            thuộc tính không bắt buộc</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">User</span> user2 =
                        <span class="keyword">new</span> <span class="class-name">User</span>.Builder()<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.username(<span
                            class="string">"linh"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.password(<span
                            class="string">"654321"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//
                            Không cần email</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//
                            Không cần age</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.address(<span
                            class="string">"Hai Phong"</span>)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>



                    <div class="success-box">
                        <h4><i class="fas fa-check-circle"></i> Ưu điểm dễ thấy với Builder:</h4>
                        <ul>
                            <li><strong>Rất dễ đọc</strong> - biết ngay giá trị nào ứng với thuộc tính nào</li>
                            <li><strong>Không sợ nhầm thứ tự</strong> - không cần nhớ thứ tự tham số</li>
                            <li><strong>Linh hoạt</strong> - có thể bỏ qua thuộc tính không cần thiết</li>
                            <li><strong>Có thể validate</strong> trong method build()</li>
                            <li><strong>Object immutable</strong> - không thể thay đổi sau khi tạo</li>
                        </ul>
                    </div>

                    <h3>7. Ưu & Nhược điểm Builder Pattern</h3>
                    <div class="comparison-grid">
                        <div class="comparison-card" style="border-top-color: var(--success);">
                            <h4><i class="fas fa-check-circle"></i> Ưu điểm</h4>
                            <ul>
                                <li>Code rõ ràng, dễ đọc</li>
                                <li>Tránh constructor quá dài</li>
                                <li>Dễ mở rộng, thêm thuộc tính mới</li>
                                <li>Có thể tạo immutable object</li>
                                <li>Validation trong build() method</li>
                            </ul>
                        </div>

                        <div class="comparison-card" style="border-top-color: var(--accent);">
                            <h4><i class="fas fa-exclamation-circle"></i> Nhược điểm</h4>
                            <ul>
                                <li>Nhiều code hơn (thêm Builder class)</li>
                                <li>Phức tạp với object đơn giản</li>
                                <li>Không phù hợp khi object ít thuộc tính</li>
                                <li>Tốn bộ nhớ hơn (tạo Builder object)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-play-circle"></i> Thử tạo User với Builder</h4>
                        <div class="input-group">
                            <label for="builderUsername">Username:</label>
                            <input type="text" id="builderUsername" value="manh">
                        </div>
                        <div class="input-group">
                            <label for="builderEmail">Email:</label>
                            <input type="email" id="builderEmail" value="manh@gmail.com">
                        </div>
                        <div class="input-group">
                            <label for="builderAge">Age (không bắt buộc):</label>
                            <input type="number" id="builderAge" value="20">
                        </div>
                        <button class="btn" onclick="testBuilderPattern()">
                            <i class="fas fa-play"></i> Tạo User với Builder
                        </button>
                        <div class="result" id="builderResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="builderResultContent"></div>
                        </div>
                    </div>
                </section>

                <!-- PHẦN VÍ DỤ BUILDER -->
                <section id="builder-example2" class="section">
                    <h2><i class="fas fa-code"></i> VÍ DỤ BUILDER PATTERN</h2>

                    <h3>5. Builder Pattern – dùng class riêng</h3>
                    <p><strong>Ví dụ:</strong> Tạo đối tượng User với nhiều thuộc tính</p>
                    <p><b>Dùng khi:</b></p>
                    <ul>
                        <li>Có nhiều lớp con</li>
                        <li>Kết hợp Factory Pattern</li>
                        <li>Bài tập tổng hợp OOP + Design Pattern</li>
                    </ul>
                    <h4>5.1. Cấu trúc file Java</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Cấu trúc file Java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        User.java // Product<br>
                        UserBuilder.java // Builder (class ngoài)<br>
                        Main.java // Test
                    </div>
                    <h4>5.2. User.java – Product</h4>
<div class="code-block">
    <div class="code-header">
        <span>User.java – Product</span>
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <span class="keyword">public class</span> <span class="class-name">User</span> {<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String username;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String password;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String email;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> <span class="keyword">int</span> age;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String address;<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Constructor chỉ cho Builder gọi</span><br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">User</span>(UserBuilder builder) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.username = builder.username;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.password = builder.password;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.email = builder.email;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.age = builder.age;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.address = builder.address;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Getter</span><br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> String getUsername() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> username;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> String getEmail() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> email;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="keyword">int</span> getAge() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> age;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> String getAddress() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> address;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</div>
                       <div class="info-box">
                        <h4><i class="fas fa-info-circle"></i> Lưu ý</h4>
                       <ul>
<li>KHÔNG có setter</li>
<li>KHÔNG tạo new User() trực tiếp</li>
<li>User chỉ nhận dữ liệu từ Builder</li>
                       </ul>
                    </div>
                    <h4>5.3.UserBuilder.java – Builder CLASS NGOÀI</h4>
<div class="code-block">
    <div class="code-header">
        <span>UserBuilder.java</span>
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <span class="keyword">public class</span> <span class="class-name">UserBuilder</span> {<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;String username;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;String password;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;String email;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">int</span> age;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;String address;<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">UserBuilder</span> username(String username) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.username = username;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return this</span>;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">UserBuilder</span> password(String password) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.password = password;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return this</span>;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">UserBuilder</span> email(String email) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.email = email;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return this</span>;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">UserBuilder</span> age(<span class="keyword">int</span> age) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.age = age;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return this</span>;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">UserBuilder</span> address(String address) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.address = address;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return this</span>;<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// build() tạo User</span><br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span class="class-name">User</span> build() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return new</span> <span class="class-name">User</span>(<span class="keyword">this</span>);<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</div>
                    <h3>6. Sử dụng Builder Pattern</h3>
<div class="code-block">
    <div class="code-header">
        <span>Main.java</span>
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
    </div>
    <span class="keyword">public class</span> <span class="class-name">Main</span> {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args) {<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">User</span> user = <span class="keyword">new</span> <span class="class-name">UserBuilder</span>()<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.username(<span class="string">"manhnd"</span>)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.password(<span class="string">"123456"</span>)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.email(<span class="string">"manh@gmail.com"</span>)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.age(21)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.address(<span class="string">"Ha Noi"</span>)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(user.getUsername());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(user.getEmail());<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
    }
</div>



                </section>

                <!-- PHẦN PROTOTYPE PATTERN -->
                <section id="prototype-intro" class="section">
                    <h2><i class="fas fa-clone"></i> II. PROTOTYPE PATTERN</h2>

                    <h3>1. Prototype Pattern là gì?</h3>
                    <p><strong>Prototype Pattern</strong> là một Creational Pattern dùng để:</p>
                    <ul>
                        <li>Tạo object mới bằng cách sao chép (clone) object đã tồn tại</li>
                        <li>Thay vì tạo mới từ đầu, hãy clone từ object có sẵn</li>
                        <li>Hiệu quả khi việc tạo object tốn nhiều tài nguyên</li>
                    </ul>

                    <div class="pattern-diagram">
                        <i class="fas fa-clone"></i>
                        <h4>Prototype Pattern: "Sao chép thay vì tạo mới"</h4>
                        <p>Tạo bản sao của đối tượng hiện có để tiết kiệm thời gian và tài nguyên</p>
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-comment"></i> Thay vì:</h4>
                        <p><code>new Object()</code> → Tạo mới từ đầu, có thể tốn thời gian</p>
                        <h4>Ta dùng:</h4>
                        <p><code>object.clone()</code> → Sao chép từ object có sẵn, nhanh hơn</p>
                    </div>

                    <h3>2. Khi nào nên dùng Prototype?</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Trường hợp</th>
                                    <th>Lý do</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Tạo object tốn tài nguyên</strong></td>
                                    <td>Clone nhanh hơn khởi tạo mới</td>
                                </tr>
                                <tr>
                                    <td><strong>Object phức tạp</strong></td>
                                    <td>Tránh khởi tạo lại từ đầu</td>
                                </tr>
                                <tr>
                                    <td><strong>Cần nhiều object giống nhau</strong></td>
                                    <td>Clone từ mẫu (prototype)</td>
                                </tr>
                                <tr>
                                    <td><strong>Khởi tạo object phức tạp</strong></td>
                                    <td>Clone từ object đã được cấu hình sẵn</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>3. Prototype Pattern trong Java</h3>
                    <div class="info-box">
                        <h4><i class="fas fa-info-circle"></i> Java hỗ trợ sẵn Cloneable</h4>
                        <p>Java có interface <code>Cloneable</code> và method <code>clone()</code> trong class
                            <code>Object</code>:
                        </p>
                        <ul>
                            <li>Interface <code>Cloneable</code> - marker interface (không có method)</li>
                            <li>Method <code>protected Object clone()</code> trong class Object</li>
                            <li>Cần override method <code>clone()</code> và implement <code>Cloneable</code></li>
                        </ul>
                    </div>
                </section>

                <!-- PHẦN VÍ DỤ PROTOTYPE -->
                <section id="prototype-example" class="section">
                    <h2><i class="fas fa-copy"></i> VÍ DỤ PROTOTYPE PATTERN CHI TIẾT</h2>

                    <h3>4. Ví dụ Prototype chi tiết</h3>

                    <h4>4.1. Lớp Prototype (Student.java)</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Student.java - Implement Cloneable</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Student</span> <span
                            class="keyword">implements</span> <span class="class-name">Cloneable</span> {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> String name;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> <span class="keyword">int</span>
                        age;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> <span
                            class="class-name">Address</span> address; <span class="comment">// Reference
                            type</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> <span
                            class="class-name">Student</span>(String name, <span class="keyword">int</span> age, <span
                            class="class-name">Address</span> address) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.name =
                        name;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.age = age;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">this</span>.address =
                        address;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Getter và Setter</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public</span> String getName() { <span
                            class="keyword">return</span> name; }<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> setName(String name) { <span
                            class="keyword">this</span>.name = name; }<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// ... các getter/setter khác</span><br>
                        }
                    </div>

                    <h4>4.2. Ghi đè clone() - Shallow Copy</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Shallow Copy implementation</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Shallow copy - mặc định</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">@Override</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">protected</span> <span
                            class="class-name">Object</span> clone() <span class="keyword">throws</span> <span
                            class="class-name">CloneNotSupportedException</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return
                            super</span>.clone();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-info-circle"></i> Giải thích shallow copy:</h4>
                        <p><code>super.clone()</code> → tạo shallow copy (copy nông):</p>
                        <ul>
                            <li>Sao chép giá trị của các thuộc tính primitive (int, String,...)</li>
                            <li><strong>Chung reference</strong> với object con (Address)</li>
                            <li>Thay đổi Address trong clone sẽ ảnh hưởng đến original</li>
                        </ul>
                    </div>

                    <h3>5. Shallow Copy vs Deep Copy</h3>

                    <div class="copy-vs-deep">
                        <div class="copy-type shallow">
                            <h4><i class="fas fa-layer-group"></i> Shallow Copy</h4>
                            <ul>
                                <li>Copy giá trị thuộc tính</li>
                                <li>Chung reference với object con</li>
                                <li>Nhanh, ít tốn bộ nhớ</li>
                                <li>Dễ implement (chỉ cần super.clone())</li>
                                <li><strong>Vấn đề:</strong> Thay đổi object con ảnh hưởng cả original</li>
                            </ul>
                            <div class="code-block" style="margin-top: 10px; font-size: 0.9em;">
                                @Override<br>
                                protected Object clone() {<br>
                                &nbsp;&nbsp;return super.clone();<br>
                                }
                            </div>
                        </div>

                        <div class="copy-type deep">
                            <h4><i class="fas fa-sitemap"></i> Deep Copy</h4>
                            <ul>
                                <li>Copy toàn bộ object, kể cả object con</li>
                                <li>Không chia sẻ reference</li>
                                <li>Tốn thời gian và bộ nhớ hơn</li>
                                <li>Phải copy từng object con</li>
                                <li><strong>Ưu điểm:</strong> Độc lập hoàn toàn với original</li>
                            </ul>
                            <div class="code-block" style="margin-top: 10px; font-size: 0.9em;">
                                @Override<br>
                                protected Object clone() {<br>
                                &nbsp;&nbsp;Student clone = (Student) super.clone();<br>
                                &nbsp;&nbsp;clone.address = new Address(this.address);<br>
                                &nbsp;&nbsp;return clone;<br>
                                }
                            </div>
                        </div>
                    </div>

                    <h4>Ví dụ Deep Copy Implementation</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Deep Copy implementation</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Deep copy - copy cả object con</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">@Override</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">protected</span> <span
                            class="class-name">Object</span> clone() <span class="keyword">throws</span> <span
                            class="class-name">CloneNotSupportedException</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Student</span> clone =
                        (<span class="class-name">Student</span>) <span class="keyword">super</span>.clone();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Deep copy cho
                            address</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clone.address = <span class="keyword">new</span>
                        <span class="class-name">Address</span>(<span class="keyword">this</span>.address);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> clone;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h3>5. Sử dụng Prototype Pattern</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>PrototypeDemo.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">PrototypeDemo</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args)
                        <span class="keyword">throws</span> <span class="class-name">CloneNotSupportedException</span>
                        {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Tạo object gốc
                            (prototype)</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Address</span> address
                        = <span class="keyword">new</span> <span class="class-name">Address</span>(<span
                            class="string">"Ha Noi"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Student</span> s1 =
                        <span class="keyword">new</span> <span class="class-name">Student</span>(<span
                            class="string">"Manh"</span>, <span class="number">20</span>, address);<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Clone object (thay vì
                            tạo mới)</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Student</span> s2 =
                        (<span class="class-name">Student</span>) s1.clone();<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Kiểm tra</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"s1 ==
                            s2: "</span> + (s1 == s2)); <span class="comment">// false - khác object</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span
                            class="string">"s1.name: "</span> + s1.getName()); <span class="comment">// Manh</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span
                            class="string">"s2.name: "</span> + s2.getName()); <span class="comment">// Manh</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Thay đổi tên của
                            s2</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s2.setName(<span
                            class="string">"Linh"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"\nSau
                            khi đổi tên:"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span
                            class="string">"s1.name: "</span> + s1.getName()); <span class="comment">// Vẫn là
                            Manh</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span
                            class="string">"s2.name: "</span> + s2.getName()); <span class="comment">// Đã thành
                            Linh</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-info-circle"></i> Kết quả:</h4>
                        <p><strong>s1 == s2: false</strong> → 2 object khác nhau<br>
                            <strong>s1.getName(): Manh</strong><br>
                            <strong>s2.getName(): Manh</strong> (ban đầu) → sau đó thành <strong>Linh</strong>
                        </p>
                        <p>→ Dữ liệu được sao chép nhưng là 2 object độc lập</p>
                    </div>

                    <h3>6. Ưu & Nhược điểm Prototype Pattern</h3>
                    <div class="comparison-grid">
                        <div class="comparison-card" style="border-top-color: var(--success);">
                            <h4><i class="fas fa-check-circle"></i> Ưu điểm</h4>
                            <ul>
                                <li>Tạo object nhanh (clone nhanh hơn new)</li>
                                <li>Giảm chi phí khởi tạo object phức tạp</li>
                                <li>Dễ tạo nhiều object giống nhau</li>
                                <li>Ẩn chi tiết tạo object từ client</li>
                            </ul>
                        </div>

                        <div class="comparison-card" style="border-top-color: var(--accent);">
                            <h4><i class="fas fa-exclamation-circle"></i> Nhược điểm</h4>
                            <ul>
                                <li>Phức tạp với object lồng nhau (deep copy)</li>
                                <li>Dễ lỗi nếu clone không đúng cách</li>
                                <li>Khó clone object có circular reference</li>
                                <li>Cloneable interface không có method (marker interface)</li>
                            </ul>
                        </div>
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-play-circle"></i> Thử nghiệm Prototype Pattern</h4>
                        <div class="input-group">
                            <label for="cloneType">Chọn loại copy:</label>
                            <select id="cloneType">
                                <option value="shallow">Shallow Copy</option>
                                <option value="deep">Deep Copy</option>
                            </select>
                        </div>
                        <button class="btn" onclick="testPrototypePattern()">
                            <i class="fas fa-play"></i> Chạy Demo Prototype
                        </button>
                        <div class="result" id="prototypeResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="prototypeResultContent"></div>
                        </div>
                    </div>
                </section>

                <!-- PHẦN SO SÁNH -->
                <section id="comparison" class="section">
                    <h2><i class="fas fa-balance-scale"></i> III. SO SÁNH BUILDER & PROTOTYPE</h2>

                    <h3>So sánh Builder và Prototype Pattern</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tiêu chí</th>
                                    <th>Builder Pattern</th>
                                    <th>Prototype Pattern</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Cách tạo object</strong></td>
                                    <td>Từng bước (step-by-step)</td>
                                    <td>Sao chép (clone)</td>
                                </tr>
                                <tr>
                                    <td><strong>Phù hợp</strong></td>
                                    <td>Object phức tạp, nhiều thuộc tính</td>
                                    <td>Object giống nhau, khởi tạo tốn kém</td>
                                </tr>
                                <tr>
                                    <td><strong>Độ linh hoạt</strong></td>
                                    <td>Cao (có thể set từng thuộc tính)</td>
                                    <td>Trung bình (clone nguyên bản)</td>
                                </tr>
                                <tr>
                                    <td><strong>Performance</strong></td>
                                    <td>Trung bình (tạo mới từ đầu)</td>
                                    <td>Cao (clone nhanh hơn new)</td>
                                </tr>
                                <tr>
                                    <td><strong>Code phức tạp</strong></td>
                                    <td>Cao (phải viết Builder class)</td>
                                    <td>Thấp đến trung bình (clone đơn giản)</td>
                                </tr>
                                <tr>
                                    <td><strong>Khi nào dùng</strong></td>
                                    <td>Object có nhiều thuộc tính optional</td>
                                    <td>Cần nhiều object giống nhau, clone nhanh</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4><i class="fas fa-building"></i> Dùng Builder khi:</h4>
                            <ul>
                                <li>Object có nhiều thuộc tính</li>
                                <li>Không phải lúc nào cũng cần set hết thuộc tính</li>
                                <li>Muốn code dễ đọc, dễ bảo trì</li>
                                <li>Cần object immutable</li>
                                <li>Ví dụ: User, Product, Configuration</li>
                            </ul>
                        </div>

                        <div class="comparison-card">
                            <h4><i class="fas fa-clone"></i> Dùng Prototype khi:</h4>
                            <ul>
                                <li>Khởi tạo object tốn nhiều tài nguyên</li>
                                <li>Cần tạo nhiều object giống nhau</li>
                                <li>Muốn ẩn chi tiết khởi tạo object</li>
                                <li>Object có cấu hình phức tạp</li>
                                <li>Ví dụ: Game character, Document template</li>
                            </ul>
                        </div>
                    </div>

                    <div class="note">
                        <h4><i class="fas fa-lightbulb"></i> Lời khuyên thực tế:</h4>
                        <p>Trong thực tế phát triển phần mềm:</p>
                        <ol>
                            <li><strong>Dùng Builder</strong> khi thiết kế các model class (User, Product, Order,...) để
                                code clean và dễ bảo trì</li>
                            <li><strong>Dùng Prototype</strong> khi làm việc với object phức tạp, cần tạo nhiều instance
                                giống nhau (game, đồ họa, template)</li>
                            <li><strong>Có thể kết hợp</strong> cả hai: Dùng Builder để tạo prototype, sau đó clone
                                prototype để tạo nhiều instance</li>
                        </ol>
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-question-circle"></i> Bài tập nhỏ</h4>
                        <p>Trong các tình huống sau, nên dùng Builder hay Prototype?</p>

                        <div class="input-group">
                            <label>1. Tạo đối tượng Order với 15 thuộc tính (customer, items, shipping,
                                payment,...):</label>
                            <select id="q1">
                                <option value="">Chọn pattern</option>
                                <option value="builder">Builder</option>
                                <option value="prototype">Prototype</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>2. Tạo 1000 enemy character trong game, mỗi character có 50+ thuộc tính:</label>
                            <select id="q2">
                                <option value="">Chọn pattern</option>
                                <option value="builder">Builder</option>
                                <option value="prototype">Prototype</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label>3. Tạo document template, sau đó tạo nhiều document từ template đó:</label>
                            <select id="q3">
                                <option value="">Chọn pattern</option>
                                <option value="builder">Builder</option>
                                <option value="prototype">Prototype</option>
                            </select>
                        </div>

                        <button class="btn" onclick="checkPatternSelection()">
                            <i class="fas fa-check"></i> Kiểm tra
                        </button>

                        <div class="result" id="patternResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="patternResultContent"></div>
                        </div>
                    </div>

                    <div class="success-box">
                        <h4><i class="fas fa-graduation-cap"></i> Tổng kết buổi học</h4>
                        <p>Hôm nay bạn đã học:</p>
                        <ol>
                            <li><strong>Builder Pattern</strong> - Tạo object phức tạp theo từng bước, code dễ đọc</li>
                            <li><strong>Prototype Pattern</strong> - Tạo object mới bằng cách clone từ object có sẵn
                            </li>
                            <li><strong>Shallow Copy vs Deep Copy</strong> - Hiểu sự khác biệt và khi nào dùng</li>
                            <li><strong>So sánh Builder vs Prototype</strong> - Biết khi nào dùng pattern nào</li>
                        </ol>
                        <p>Hai pattern này đều thuộc nhóm <strong>Creational Patterns</strong>, giúp việc tạo object
                            linh hoạt và hiệu quả hơn.</p>
                    </div>
                </section>
            </main>
        </div>

        <footer>
            <p> Giáo trình Java- Builder & Prototype Pattern © GV: Nguyễn Đình Mạnh</p>
        </footer>
    </div>

    <script>
        // Xử lý điều hướng
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section');

            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Xóa class active từ tất cả các link và section
                    navLinks.forEach(item => item.classList.remove('active'));
                    sections.forEach(section => section.classList.remove('active'));

                    // Thêm class active cho link được click
                    this.classList.add('active');

                    // Hiển thị section tương ứng
                    const targetId = this.getAttribute('href').substring(1);
                    document.getElementById(targetId).classList.add('active');
                });
            });
        });

        // Hàm copy code
        function copyCode(button) {
            const codeBlock = button.parentElement.parentElement;
            const text = codeBlock.innerText;
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Đã copy!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // Kiểm tra thứ tự constructor
        function checkConstructorOrder() {
            const selected = document.getElementById('constructorOrder').value;
            const result = document.getElementById('constructorResult');
            const output = document.getElementById('constructorResultContent');

            result.classList.add('active');

            let outputText = `=== KIỂM TRA THỨ TỰ CONSTRUCTOR ===\n\n`;

            if (selected === 'correct') {
                outputText += `✅ ĐÚNG! Thứ tự là: username, password, email, age, address, role\n\n`;
                outputText += `Nhưng vấn đề là:\n`;
                outputText += `1. Bạn có chắc sẽ nhớ mãi thứ tự này?\n`;
                outputText += `2. 3 tháng sau đọc lại code, bạn có hiểu ngay?\n`;
                outputText += `3. Nếu thêm thuộc tính mới, phải sửa tất cả chỗ gọi constructor?\n\n`;
                outputText += `👉 Đây là lý do cần Builder Pattern!`;
            } else if (selected === 'wrong1' || selected === 'wrong2') {
                outputText += `❌ SAI! Thứ tự đúng là: username, password, email, age, address, role\n\n`;
                outputText += `Đây chính là vấn đề với constructor nhiều tham số!\n`;
                outputText += `- Dễ nhầm lẫn thứ tự\n`;
                outputText += `- Khó đọc, khó bảo trì\n`;
                outputText += `- Runtime error nếu truyền sai type\n\n`;
                outputText += `👉 Builder Pattern giải quyết tất cả vấn đề này!`;
            } else {
                outputText += `⚠ Vui lòng chọn một đáp án!`;
            }

            output.textContent = outputText;
        }

        // Thử nghiệm Builder Pattern
        function testBuilderPattern() {
            const username = document.getElementById('builderUsername').value || "manh";
            const email = document.getElementById('builderEmail').value || "manh@gmail.com";
            const age = document.getElementById('builderAge').value || "20";

            const result = document.getElementById('builderResult');
            const output = document.getElementById('builderResultContent');

            result.classList.add('active');

            let outputText = `=== DEMO BUILDER PATTERN ===\n\n`;
            outputText += `// Tạo User với Builder\n`;
            outputText += `User user = new User.Builder()\n`;
            outputText += `    .username("${username}")\n`;
            outputText += `    .password("******")\n`;
            outputText += `    .email("${email}")\n`;

            if (age) {
                outputText += `    .age(${age})\n`;
            } else {
                outputText += `    // Không set age (optional)\n`;
            }

            outputText += `    .address("Ha Noi")\n`;
            outputText += `    .build();\n\n`;

            outputText += `Ưu điểm với Builder:\n`;
            outputText += `1. ✅ Dễ đọc: biết ngay giá trị nào ứng với thuộc tính nào\n`;
            outputText += `2. ✅ Không cần nhớ thứ tự tham số\n`;
            outputText += `3. ✅ Có thể bỏ qua thuộc tính không cần thiết (age)\n`;
            outputText += `4. ✅ Có thể validate trong build() method\n`;
            outputText += `5. ✅ Object immutable (không thay đổi sau khi tạo)\n\n`;

            outputText += `User được tạo thành công!`;

            output.textContent = outputText;
        }

        // Thử nghiệm Prototype Pattern
        function testPrototypePattern() {
            const cloneType = document.getElementById('cloneType').value;
            const result = document.getElementById('prototypeResult');
            const output = document.getElementById('prototypeResultContent');

            result.classList.add('active');

            let outputText = `=== DEMO PROTOTYPE PATTERN ===\n\n`;
            outputText += `// Tạo object gốc\n`;
            outputText += `Student s1 = new Student("Manh", 20, new Address("Ha Noi"));\n\n`;
            outputText += `// Clone object\n`;
            outputText += `Student s2 = (Student) s1.clone();\n\n`;

            outputText += `Kết quả:\n`;
            outputText += `s1 == s2: false (2 object khác nhau)\n`;
            outputText += `s1.name: Manh\n`;
            outputText += `s2.name: Manh (sao chép từ s1)\n\n`;

            outputText += `// Thay đổi tên s2\n`;
            outputText += `s2.setName("Linh");\n\n`;

            outputText += `Sau khi đổi:\n`;
            outputText += `s1.name: Manh (không đổi)\n`;
            outputText += `s2.name: Linh (đã đổi)\n\n`;

            if (cloneType === 'shallow') {
                outputText += `⚠ Với SHALLOW COPY:\n`;
                outputText += `- s1.address == s2.address: true (cùng reference)\n`;
                outputText += `- Thay đổi address trong s2 sẽ ảnh hưởng đến s1!\n`;
                outputText += `- Nhanh nhưng có thể gây bug\n\n`;
                outputText += `👉 Dùng khi object không có reference type hoặc muốn share reference`;
            } else {
                outputText += `✅ Với DEEP COPY:\n`;
                outputText += `- s1.address == s2.address: false (khác reference)\n`;
                outputText += `- Thay đổi address trong s2 KHÔNG ảnh hưởng đến s1\n`;
                outputText += `- Tốn thời gian và bộ nhớ hơn nhưng an toàn\n\n`;
                outputText += `👉 Dùng khi object có reference type và cần độc lập hoàn toàn`;
            }

            output.textContent = outputText;
        }

        // Kiểm tra lựa chọn pattern
        function checkPatternSelection() {
            const q1 = document.getElementById('q1').value;
            const q2 = document.getElementById('q2').value;
            const q3 = document.getElementById('q3').value;

            const result = document.getElementById('patternResult');
            const output = document.getElementById('patternResultContent');

            result.classList.add('active');

            let score = 0;
            let outputText = `=== KIỂM TRA HIỂU BIẾT PATTERN ===\n\n`;

            // Câu 1
            outputText += `1. Tạo đối tượng Order với 15 thuộc tính:\n`;
            outputText += `   Đáp án của bạn: ${q1 === 'builder' ? 'Builder ✅' : q1 === 'prototype' ? 'Prototype' : 'Chưa chọn'}\n`;
            if (q1 === 'builder') {
                outputText += `   ✅ ĐÚNG! Builder phù hợp cho object nhiều thuộc tính, đặc biệt khi có thuộc tính optional\n`;
                score++;
            } else if (q1 === 'prototype') {
                outputText += `   ❌ SAI - Order có nhiều thuộc tính, Builder sẽ giúp code dễ đọc hơn\n`;
            }

            // Câu 2
            outputText += `\n2. Tạo 1000 enemy character trong game:\n`;
            outputText += `   Đáp án của bạn: ${q2 === 'builder' ? 'Builder' : q2 === 'prototype' ? 'Prototype ✅' : 'Chưa chọn'}\n`;
            if (q2 === 'prototype') {
                outputText += `   ✅ ĐÚNG! Prototype phù hợp khi cần tạo nhiều object giống nhau, clone nhanh hơn new\n`;
                score++;
            } else if (q2 === 'builder') {
                outputText += `   ❌ SAI - Với 1000 object giống nhau, Prototype (clone) sẽ hiệu quả hơn\n`;
            }

            // Câu 3
            outputText += `\n3. Tạo document template, sau đó tạo nhiều document:\n`;
            outputText += `   Đáp án của bạn: ${q3 === 'builder' ? 'Builder' : q3 === 'prototype' ? 'Prototype ✅' : 'Chưa chọn'}\n`;
            if (q3 === 'prototype') {
                outputText += `   ✅ ĐÚNG! Template là classic use case của Prototype pattern\n`;
                score++;
            } else if (q3 === 'builder') {
                outputText += `   ❌ SAI - Khi đã có template, clone từ template (Prototype) hiệu quả hơn\n`;
            }

            outputText += `\n=== TỔNG KẾT ===\n`;
            outputText += `Số câu đúng: ${score}/3\n`;

            if (score === 3) {
                outputText += `🎉 Xuất sắc! Bạn đã hiểu rõ khi nào dùng Builder, khi nào dùng Prototype!`;
            } else if (score === 2) {
                outputText += `👍 Tốt! Hãy ôn tập lại một chút về use case của mỗi pattern.`;
            } else {
                outputText += `📚 Cần ôn tập lại về Builder và Prototype pattern. Nhớ:\n`;
                outputText += `- Builder: object nhiều thuộc tính, code clean\n`;
                outputText += `- Prototype: nhiều object giống nhau, clone nhanh`;
            }

            output.textContent = outputText;
        }
    </script>
</body>

</html>