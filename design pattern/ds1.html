<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUỔI 17: Singleton & Factory Pattern</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --success: #27ae60;
            --warning: #f39c12;
            --info: #17a2b8;
            --light: #ecf0f1;
            --dark: #2c3e50;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: var(--primary);
            color: white;
            text-align: center;
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .content-wrapper {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 80vh;
        }

        .sidebar {
            background: var(--light);
            padding: 20px;
            border-right: 3px solid var(--secondary);
        }

        .nav-list {
            list-style: none;
            position: sticky;
            top: 20px;
        }

        .nav-item {
            margin-bottom: 5px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--secondary);
            color: white;
            transform: translateX(5px);
            border-color: var(--secondary);
        }

        .main-content {
            padding: 30px;
            overflow-y: auto;
            max-height: 80vh;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            color: var(--accent);
            margin: 25px 0 15px;
            padding-left: 15px;
            border-left: 4px solid var(--accent);
        }

        h4 {
            color: var(--info);
            margin: 20px 0 10px;
        }

        h5 {
            color: var(--dark);
            margin: 15px 0 8px;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        ul,
        ol {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin-bottom: 8px;
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.4;
            border: 2px solid #444;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            color: #888;
            font-size: 0.9rem;
        }

        .copy-btn {
            background: #555;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .keyword {
            color: #569cd6;
        }

        .string {
            color: #ce9178;
        }

        .comment {
            color: #6a9955;
        }

        .number {
            color: #b5cea8;
        }

        .class-name {
            color: #4ec9b0;
        }

        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        th {
            background: var(--secondary);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .note {
            background: #fff3cd;
            border-left: 4px solid var(--warning);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid var(--info);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid var(--success);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .warning-box {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }

        .interactive-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid #e9ecef;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
        }

        .btn-run {
            background: var(--success);
        }

        .result {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            background: white;
            border-left: 4px solid var(--warning);
            display: none;
        }

        .result.active {
            display: block;
        }

        .result-content {
            font-family: 'Consolas', 'Monaco', monospace;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 10px;
            border: 1px solid #e9ecef;
            white-space: pre-wrap;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-top: 4px solid var(--secondary);
        }

        .comparison-card h4 {
            color: var(--primary);
            margin-top: 0;
        }

        footer {
            text-align: center;
            padding: 20px;
            background: var(--primary);
            color: white;
        }

        @media (max-width: 768px) {
            .content-wrapper {
                grid-template-columns: 1fr;
            }

            .sidebar {
                border-right: none;
                border-bottom: 3px solid var(--secondary);
            }
            
            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        .pattern-diagram {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            border: 2px dashed #ddd;
        }

        .pattern-diagram i {
            font-size: 48px;
            color: var(--secondary);
            margin: 10px;
        }

        .pattern-steps {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .pattern-step {
            background: white;
            border-radius: 8px;
            padding: 15px;
            width: 33.3%;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            border: 2px solid var(--light);
        }

        .pattern-step-number {
            background: var(--secondary);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-cogs"></i> BUỔI 17: Singleton & Factory Pattern</h1>
        </header>

        <div class="content-wrapper">
            <nav class="sidebar">
                <ul class="nav-list">
                    <li class="nav-item"><a href="#intro" class="nav-link active"><i class="fas fa-home"></i> Giới thiệu Design Pattern</a></li>
                    <li class="nav-item"><a href="#singleton" class="nav-link"><i class="fas fa-cube"></i> Singleton Pattern</a></li>
                    <li class="nav-item"><a href="#factory-method" class="nav-link"><i class="fas fa-industry"></i> Factory Method Pattern</a></li>
                    <li class="nav-item"><a href="#simple-factory" class="nav-link"><i class="fas fa-tools"></i> Simple Factory Pattern</a></li>
                    <li class="nav-item"><a href="#comparison" class="nav-link"><i class="fas fa-balance-scale"></i> So sánh Pattern</a></li>
                    <li class="nav-item"><a href="#exercises" class="nav-link"><i class="fas fa-dumbbell"></i> Bài tập thực hành</a></li>
                </ul>
            </nav>

            <main class="main-content">
                <!-- PHẦN GIỚI THIỆU -->
                <section id="intro" class="section active">
                    <h2><i class="fas fa-home"></i> GIỚI THIỆU VỀ DESIGN PATTERNS</h2>
                    <div style="display: flex; justify-content: center;"><img style="width: 60%; " src="../img//ds1.png" alt=""></div>
                    <h3>1.1 Design Pattern là gì?</h3>
                    <p><strong>Design Pattern (Mẫu thiết kế)</strong> là:</p>
                    <ul>
                        <li><strong>Những giải pháp đã được kiểm chứng</strong> trong thực tế</li>
                        <li>Dùng để giải quyết các vấn đề thường gặp trong thiết kế phần mềm</li>
                        <li>Không phải là code hoàn chỉnh, mà là <strong>khuôn mẫu tư duy</strong> để viết code tốt hơn</li>
                    </ul>

                    <div class="info-box">
                        <h4><i class="fas fa-lightbulb"></i> Hiểu đơn giản:</h4>
                        <p><strong>Design Pattern = Cách viết code thông minh, dễ bảo trì, dễ mở rộng</strong></p>
                    </div>

                    <h3>1.2 Vì sao cần Design Patterns?</h3>
                    
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>Không dùng Design Pattern:</h4>
                            <ul>
                                <li>Code bị trùng lặp nhiều</li>
                                <li>Khó bảo trì, sửa đổi</li>
                                <li>Sửa một chỗ → lỗi nhiều chỗ</li>
                                <li>Khó mở rộng hệ thống</li>
                                <li>Không tuân theo chuẩn</li>
                            </ul>
                        </div>
                        
                        <div class="comparison-card">
                            <h4>Dùng Design Pattern:</h4>
                            <ul>
                                <li>Code gọn gàng, có tổ chức</li>
                                <li>Dễ hiểu, dễ đọc</li>
                                <li>Dễ nâng cấp, mở rộng</li>
                                <li>Tái sử dụng code tốt</li>
                                <li>Chuẩn theo best practice</li>
                            </ul>
                        </div>
                    </div>

                    <h3>1.3 Nhóm Design Pattern phổ biến</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Nhóm</th>
                                    <th>Mục đích</th>
                                    <th>Ví dụ</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Creational</strong></td>
                                    <td>Tạo đối tượng (Object Creation)</td>
                                    <td>Singleton, Factory, Builder</td>
                                </tr>
                                <tr>
                                    <td><strong>Structural</strong></td>
                                    <td>Cấu trúc lớp và đối tượng</td>
                                    <td>Adapter, Decorator, Proxy</td>
                                </tr>
                                <tr>
                                    <td><strong>Behavioral</strong></td>
                                    <td>Hành vi, tương tác giữa các đối tượng</td>
                                    <td>Observer, Strategy, Command</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="success-box">
                        <h4><i class="fas fa-bullseye"></i> Trọng tâm buổi học:</h4>
                        <p>Buổi này chúng ta tập trung vào <strong>Creational Pattern</strong> với 2 mẫu thiết kế quan trọng:</p>
                        <ol>
                            <li><strong>Singleton Pattern</strong> - Đảm bảo chỉ có 1 instance duy nhất</li>
                            <li><strong>Factory Pattern</strong> - Tạo đối tượng mà không cần chỉ định lớp cụ thể</li>
                        </ol>
                    </div>
                </section>

                <!-- PHẦN SINGLETON PATTERN -->
                <section id="singleton" class="section">
                    <h2><i class="fas fa-cube"></i> SINGLETON PATTERN</h2>

                    <h3>2.1 Singleton Pattern là gì?</h3>
                    <p><strong>Singleton Pattern</strong> đảm bảo rằng:</p>
                    <ul>
                        <li>Chỉ có <strong>duy nhất 1 đối tượng</strong> của một lớp được tạo ra</li>
                        <li>Mọi nơi trong chương trình đều dùng <strong>chung đối tượng đó</strong></li>
                        <li>Constructor của lớp là <strong>private</strong></li>
                    </ul>

                    <div class="pattern-diagram">
                        <i class="fas fa-crown"></i>
                        <h4>Singleton: "Một và chỉ một"</h4>
                        <p>Mọi yêu cầu đều trả về cùng một instance</p>
                    </div>

                    <h3>2.2 Ví dụ thực tế</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Thực tế</th>
                                    <th>Giải thích</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Kết nối Database</strong></td>
                                    <td>Chỉ cần 1 kết nối đến CSDL để quản lý tài nguyên</td>
                                </tr>
                                <tr>
                                    <td><strong>Logger</strong></td>
                                    <td>Ghi log tập trung vào một file duy nhất</td>
                                </tr>
                                <tr>
                                    <td><strong>Config hệ thống</strong></td>
                                    <td>Dùng chung cấu hình cho toàn bộ ứng dụng</td>
                                </tr>
                                <tr>
                                    <td><strong>Cache Manager</strong></td>
                                    <td>Quản lý bộ nhớ cache toàn cục</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>2.3 Đặc điểm của Singleton</h3>
                    <div class="pattern-steps">
                        <div class="pattern-step">
                            <div class="pattern-step-number">1</div>
                            <strong>Constructor private</strong>
                            <p>Không cho phép tạo đối tượng từ bên ngoài</p>
                        </div>
                        <div class="pattern-step">
                            <div class="pattern-step-number">2</div>
                            <strong>Biến static</strong>
                            <p>Lưu trữ instance duy nhất</p>
                        </div>
                        <div class="pattern-step">
                            <div class="pattern-step-number">3</div>
                            <strong>Method static</strong>
                            <p>Lấy instance (tạo mới nếu chưa có)</p>
                        </div>
                    </div>

                    <h3>2.4 Ví dụ Singleton trong Java</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Singleton.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Singleton</span> {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Bước 1: tạo biến static lưu instance duy nhất</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private static</span> <span class="class-name">Singleton</span> instance;<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Bước 2: constructor private</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> Singleton() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Singleton instance được tạo!"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Bước 3: method static để lấy instance</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static</span> <span class="class-name">Singleton</span> getInstance() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> (instance == <span class="keyword">null</span>) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance = <span class="keyword">new</span> Singleton();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span> instance;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Các method khác của lớp</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> showMessage() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Hello từ Singleton!"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h3>2.5 Sử dụng Singleton</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>SingletonDemo.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">SingletonDemo</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Lấy instance của Singleton</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Singleton</span> s1 = <span class="class-name">Singleton</span>.getInstance();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Singleton</span> s2 = <span class="class-name">Singleton</span>.getInstance();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Singleton</span> s3 = <span class="class-name">Singleton</span>.getInstance();<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Kiểm tra xem có phải cùng instance không</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"s1 == s2: "</span> + (s1 == s2)); <span class="comment">// true</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"s2 == s3: "</span> + (s2 == s3)); <span class="comment">// true</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Gọi method từ instance</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s1.showMessage();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="info-box">
                        <h4><i class="fas fa-info-circle"></i> Kết quả chạy chương trình:</h4>
                        <p><strong>Singleton instance được tạo!</strong><br>
                        s1 == s2: true<br>
                        s2 == s3: true<br>
                        Hello từ Singleton!</p>
                        <p><strong>Chú ý:</strong> Dòng "Singleton instance được tạo!" chỉ in ra <strong>một lần duy nhất</strong>, 
                        chứng tỏ chỉ có một instance được tạo.</p>
                    </div>

                    <h3>2.6 Ưu & Nhược điểm</h3>
                    <div class="comparison-grid">
                        <div class="comparison-card" style="border-top-color: var(--success);">
                            <h4><i class="fas fa-check-circle"></i> Ưu điểm</h4>
                            <ul>
                                <li>Kiểm soát số lượng object</li>
                                <li>Tiết kiệm tài nguyên</li>
                                <li>Dễ quản lý dữ liệu chung</li>
                                <li>Toàn cục, dễ truy cập</li>
                            </ul>
                        </div>
                        
                        <div class="comparison-card" style="border-top-color: var(--accent);">
                            <h4><i class="fas fa-exclamation-circle"></i> Nhược điểm</h4>
                            <ul>
                                <li>Khó test (unit test)</li>
                                <li>Dễ bị lạm dụng</li>
                                <li>Vi phạm Single Responsibility</li>
                                <li>Không phù hợp mọi trường hợp</li>
                            </ul>
                        </div>
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-play-circle"></i> Thử nghiệm Singleton Pattern</h4>
                        <p>Nhấn nút dưới đây để xem Singleton hoạt động:</p>
                        <button class="btn" onclick="testSingleton()">
                            <i class="fas fa-play"></i> Chạy Demo Singleton
                        </button>
                        <div class="result" id="singletonResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="singletonResultContent"></div>
                        </div>
                    </div>
                </section>

                <!-- PHẦN FACTORY METHOD PATTERN -->
                <section id="factory-method" class="section">
                    <h2><i class="fas fa-industry"></i> FACTORY METHOD PATTERN</h2>

                    <h3>3.1 Factory Method Pattern là gì?</h3>
                    <p><strong>Factory Method Pattern</strong> là:</p>
                    <ul>
                        <li>Một pattern dùng để tạo object thông qua method</li>
                        <li>Ẩn chi tiết khởi tạo object từ client</li>
                        <li>Cho phép lớp con quyết định lớp nào sẽ được khởi tạo</li>
                    </ul>

                    <div class="pattern-diagram">
                        <i class="fas fa-industry"></i>
                        <h4>Factory Method: "Nhà máy tạo đối tượng"</h4>
                        <p>Client không cần biết chi tiết tạo đối tượng, chỉ cần yêu cầu loại đối tượng</p>
                    </div>

                    <h3>3.2 Vấn đề khi KHÔNG dùng Factory</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Vấn đề: Quá nhiều điều kiện if-else</span>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">WithoutFactory</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String type = <span class="string">"dog"</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Animal</span> animal = <span class="keyword">null</span>;<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Code xấu: nhiều if-else, khó mở rộng</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> (type.equals(<span class="string">"dog"</span>)) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animal = <span class="keyword">new</span> Dog();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="keyword">else if</span> (type.equals(<span class="string">"cat"</span>)) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animal = <span class="keyword">new</span> Cat();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="keyword">else if</span> (type.equals(<span class="string">"duck"</span>)) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animal = <span class="keyword">new</span> Duck();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;animal.sound();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="warning-box">
                        <h4><i class="fas fa-exclamation-triangle"></i> Nhược điểm không dùng Factory:</h4>
                        <ul>
                            <li>Mỗi lần thêm loại mới → phải sửa code cũ</li>
                            <li>Vi phạm nguyên tắc <strong>Open/Closed</strong></li>
                            <li>Code dài, khó đọc, khó bảo trì</li>
                            <li>Client biết quá nhiều về các lớp cụ thể</li>
                        </ul>
                    </div>

                    <h3>3.3 Ví dụ Factory Method trong Java</h3>
                    
                    <h4>Bước 1: Interface chung</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Animal.java (Interface)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public interface</span> <span class="class-name">Animal</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">void</span> sound();<br>
                        }
                    </div>

                    <h4>Bước 2: Các lớp cụ thể</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Dog.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Dog</span> <span class="keyword">implements</span> <span class="class-name">Animal</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> sound() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Gâu gâu!"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span>Cat.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Cat</span> <span class="keyword">implements</span> <span class="class-name">Animal</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> sound() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Meo meo!"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h4>Bước 3: Factory class</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>AnimalFactory.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">AnimalFactory</span> {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Factory method</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static</span> <span class="class-name">Animal</span> createAnimal(String type) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> (type == <span class="keyword">null</span>) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return null</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> (type.equalsIgnoreCase(<span class="string">"dog"</span>)) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return new</span> Dog();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="keyword">else if</span> (type.equalsIgnoreCase(<span class="string">"cat"</span>)) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return new</span> Cat();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return null</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h3>3.4 Sử dụng Factory Method</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>FactoryDemo.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">FactoryDemo</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args) {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Tạo Animal thông qua Factory</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Animal</span> dog = <span class="class-name">AnimalFactory</span>.createAnimal(<span class="string">"dog"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Animal</span> cat = <span class="class-name">AnimalFactory</span>.createAnimal(<span class="string">"cat"</span>);<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Gọi phương thức</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dog.sound();  <span class="comment">// Output: Gâu gâu!</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cat.sound();  <span class="comment">// Output: Meo meo!</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Thêm loại mới DUCK mà không cần sửa code client</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Chỉ cần thêm lớp Duck và cập nhật Factory</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="success-box">
                        <h4><i class="fas fa-check-circle"></i> Ưu điểm của Factory Method:</h4>
                        <ul>
                            <li><strong>Giảm sự phụ thuộc</strong> giữa các lớp</li>
                            <li><strong>Dễ mở rộng</strong>: Thêm loại mới mà không sửa code client</li>
                            <li>Code rõ ràng, dễ bảo trì</li>
                            <li>Tuân thủ nguyên tắc <strong>Open/Closed</strong></li>
                            <li>Ẩn chi tiết khởi tạo object</li>
                        </ul>
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-play-circle"></i> Thử nghiệm Factory Method</h4>
                        <div class="input-group">
                            <label for="animalType">Chọn loại Animal:</label>
                            <select id="animalType">
                                <option value="dog">Dog</option>
                                <option value="cat">Cat</option>
                                <option value="duck">Duck</option>
                            </select>
                        </div>
                        <button class="btn" onclick="testFactoryMethod()">
                            <i class="fas fa-play"></i> Tạo Animal với Factory
                        </button>
                        <div class="result" id="factoryMethodResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="factoryMethodResultContent"></div>
                        </div>
                    </div>
                </section>

                <!-- PHẦN SIMPLE FACTORY PATTERN -->
                <section id="simple-factory" class="section">
                    <h2><i class="fas fa-tools"></i> SIMPLE FACTORY PATTERN</h2>

                    <h3>4.1 Simple Factory là gì?</h3>
                    <p><strong>Simple Factory Pattern</strong> là:</p>
                    <ul>
                        <li>Phiên bản đơn giản của Factory Pattern</li>
                        <li>Không phải pattern chính thức trong GoF (Gang of Four)</li>
                        <li>Dùng 1 class duy nhất để tạo tất cả các object</li>
                        <li>Phù hợp cho dự án nhỏ, đơn giản</li>
                    </ul>

                    <div class="pattern-diagram">
                        <i class="fas fa-tools"></i>
                        <h4>Simple Factory: "Công cụ đa năng đơn giản"</h4>
                        <p>Một lớp duy nhất chịu trách nhiệm tạo tất cả các loại đối tượng</p>
                    </div>

                    <h3>4.2 Ví dụ Simple Factory Pattern</h3>
                    
                    <h4>Bước 1: Interface Shape</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Shape.java (Interface)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public interface</span> <span class="class-name">Shape</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">void</span> draw();<br>
                        }
                    </div>

                    <h4>Bước 2: Các lớp cụ thể</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>Circle.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Circle</span> <span class="keyword">implements</span> <span class="class-name">Shape</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> draw() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Vẽ hình tròn"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="code-block">
                        <div class="code-header">
                            <span>Rectangle.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">Rectangle</span> <span class="keyword">implements</span> <span class="class-name">Shape</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> draw() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Vẽ hình chữ nhật"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h4>Bước 3: Simple Factory</h4>
                    <div class="code-block">
                        <div class="code-header">
                            <span>ShapeFactory.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">ShapeFactory</span> {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Simple Factory method</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static</span> <span class="class-name">Shape</span> createShape(String type) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span> (type == <span class="keyword">null</span>) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return null</span>;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">switch</span> (type.toLowerCase()) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">case</span> <span class="string">"circle"</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return new</span> Circle();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">case</span> <span class="string">"rectangle"</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return new</span> Rectangle();<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">default</span>:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">throw new</span> IllegalArgumentException(<span class="string">"Loại hình không hợp lệ: "</span> + type);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h3>4.3 Sử dụng Simple Factory</h3>
                    <div class="code-block">
                        <div class="code-header">
                            <span>SimpleFactoryDemo.java</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public class</span> <span class="class-name">SimpleFactoryDemo</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public static void</span> main(String[] args) {<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Tạo Shape thông qua Simple Factory</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Shape</span> circle = <span class="class-name">ShapeFactory</span>.createShape(<span class="string">"circle"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Shape</span> rectangle = <span class="class-name">ShapeFactory</span>.createShape(<span class="string">"rectangle"</span>);<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Vẽ các hình</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;circle.draw();     <span class="comment">// Output: Vẽ hình tròn</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rectangle.draw();  <span class="comment">// Output: Vẽ hình chữ nhật</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Thử tạo hình không hợp lệ</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">try</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="class-name">Shape</span> invalid = <span class="class-name">ShapeFactory</span>.createShape(<span class="string">"triangle"</span>);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="keyword">catch</span> (IllegalArgumentException e) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(e.getMessage());<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <div class="interactive-section">
                        <h4><i class="fas fa-play-circle"></i> Thử nghiệm Simple Factory</h4>
                        <div class="input-group">
                            <label for="shapeType">Chọn loại Shape:</label>
                            <select id="shapeType">
                                <option value="circle">Circle</option>
                                <option value="rectangle">Rectangle</option>
                                <option value="triangle">Triangle (invalid)</option>
                            </select>
                        </div>
                        <button class="btn" onclick="testSimpleFactory()">
                            <i class="fas fa-play"></i> Tạo Shape với Simple Factory
                        </button>
                        <div class="result" id="simpleFactoryResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="simpleFactoryResultContent"></div>
                        </div>
                    </div>
                </section>

                <!-- PHẦN SO SÁNH PATTERN -->
                <section id="comparison" class="section">
                    <h2><i class="fas fa-balance-scale"></i> SO SÁNH CÁC PATTERN</h2>

                    <h3>5.1 So sánh Factory Method & Simple Factory</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tiêu chí</th>
                                    <th>Simple Factory</th>
                                    <th>Factory Method</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>Độ phức tạp</strong></td>
                                    <td>Thấp, dễ hiểu</td>
                                    <td>Cao hơn, cần hiểu OOP</td>
                                </tr>
                                <tr>
                                    <td><strong>Mở rộng</strong></td>
                                    <td>Khó hơn, phải sửa factory class</td>
                                    <td>Dễ hơn, thêm lớp con mới</td>
                                </tr>
                                <tr>
                                    <td><strong>Phù hợp</strong></td>
                                    <td>Project nhỏ, ít thay đổi</td>
                                    <td>Project lớn, cần linh hoạt</td>
                                </tr>
                                <tr>
                                    <td><strong>Loại pattern</strong></td>
                                    <td>Không phải pattern GoF</td>
                                    <td>Pattern chính thức trong GoF</td>
                                </tr>
                                <tr>
                                    <td><strong>Ưu điểm</strong></td>
                                    <td>Đơn giản, dễ cài đặt</td>
                                    <td>Linh hoạt, dễ mở rộng</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <h3>5.2 Khi nào dùng Singleton?</h3>
                    <div class="note">
                        <h4><i class="fas fa-check-square"></i> Dùng Singleton khi:</h4>
                        <ul>
                            <li>Cần quản lý tài nguyên dùng chung (database connection, logger)</li>
                            <li>Muốn kiểm soát số lượng instance (chỉ 1 instance)</li>
                            <li>Cần truy cập toàn cục từ nhiều nơi</li>
                            <li>Đảm bảo tính nhất quán của dữ liệu</li>
                        </ul>
                    </div>

                    <h3>5.3 Khi nào dùng Factory?</h3>
                    <div class="note">
                        <h4><i class="fas fa-check-square"></i> Dùng Factory khi:</h4>
                        <ul>
                            <li>Không biết trước chính xác lớp nào cần tạo</li>
                            <li>Muốn ẩn chi tiết khởi tạo object</li>
                            <li>Muốn dễ dàng mở rộng thêm loại mới</li>
                            <li>Muốn giảm sự phụ thuộc giữa các lớp</li>
                            <li>Có nhiều object cùng interface nhưng khác implementation</li>
                        </ul>
                    </div>

                    <h3>5.4 Lưu ý quan trọng</h3>
                    <div class="warning-box">
                        <h4><i class="fas fa-exclamation-triangle"></i> Không lạm dụng Design Pattern!</h4>
                        <p>Design Pattern là công cụ mạnh mẽ, nhưng không phải lúc nào cũng cần dùng:</p>
                        <ul>
                            <li><strong>Đừng dùng pattern khi không cần thiết</strong> - Over-engineering</li>
                            <li>Hiểu rõ vấn đề trước khi chọn pattern</li>
                            <li>Simple Factory đủ dùng thì đừng dùng Abstract Factory</li>
                            <li>Singleton có thể gây khó test - cân nhắc Dependency Injection</li>
                        </ul>
                    </div>
                </section>

                <!-- PHẦN BÀI TẬP THỰC HÀNH -->
                <section id="exercises" class="section">
                    <h2><i class="fas fa-dumbbell"></i> BÀI TẬP THỰC HÀNH</h2>

                    <h3>6.1 Bài tập 1: Logger Singleton</h3>
                    <p>Tạo một lớp <strong>Logger</strong> sử dụng Singleton pattern để ghi log vào file.</p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>Logger.java (Bài tập)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">import</span> java.io.*;<br>
                        <br>
                        <span class="keyword">public class</span> <span class="class-name">Logger</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// TODO: Implement Singleton pattern</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 1. Biến static instance</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 2. Constructor private</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// 3. Method getInstance()</span><br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> PrintWriter writer;<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">private</span> Logger() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// TODO: Khởi tạo file log</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> log(String message) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// TODO: Ghi message vào file</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"LOG: "</span> + message);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        <br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> close() {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// TODO: Đóng file</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }
                    </div>

                    <h3>6.2 Bài tập 2: Notification Factory</h3>
                    <p>Tạo một Factory để tạo các loại thông báo (Email, SMS, Push).</p>
                    
                    <div class="code-block">
                        <div class="code-header">
                            <span>NotificationFactory.java (Bài tập)</span>
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                        </div>
                        <span class="keyword">public interface</span> <span class="class-name">Notification</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">void</span> send(String message);<br>
                        }<br>
                        <br>
                        <span class="keyword">public class</span> <span class="class-name">EmailNotification</span> <span class="keyword">implements</span> <span class="class-name">Notification</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> send(String message) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Gửi email: "</span> + message);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }<br>
                        <br>
                        <span class="keyword">public class</span> <span class="class-name">SMSNotification</span> <span class="keyword">implements</span> <span class="class-name">Notification</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">public void</span> send(String message) {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class="string">"Gửi SMS: "</span> + message);<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                        }<br>
                        <br>
                        <span class="keyword">public class</span> <span class="class-name">NotificationFactory</span> {<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// TODO: Tạo method createNotification(type)</span><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">// Trả về EmailNotification, SMSNotification, hoặc PushNotification</span><br>
                        }
                    </div>

                    <h3>6.3 Câu hỏi ôn tập</h3>
                    <div class="interactive-section">
                        <h4><i class="fas fa-question-circle"></i> Trắc nghiệm Design Pattern</h4>
                        
                        <div class="input-group">
                            <label>1. Singleton Pattern đảm bảo:</label>
                            <select id="q1">
                                <option value="">Chọn đáp án</option>
                                <option value="a">Có nhiều instance của một lớp</option>
                                <option value="b">Chỉ có một instance duy nhất</option>
                                <option value="c">Không thể tạo instance</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label>2. Factory Pattern dùng để:</label>
                            <select id="q2">
                                <option value="">Chọn đáp án</option>
                                <option value="a">Quản lý kết nối database</option>
                                <option value="b">Tạo object mà không cần chỉ định lớp cụ thể</option>
                                <option value="c">Đảm bảo tính duy nhất của object</option>
                            </select>
                        </div>
                        
                        <div class="input-group">
                            <label>3. Constructor của Singleton phải là:</label>
                            <select id="q3">
                                <option value="">Chọn đáp án</option>
                                <option value="a">Public</option>
                                <option value="b">Private</option>
                                <option value="c">Protected</option>
                            </select>
                        </div>
                        
                        <button class="btn" onclick="checkQuiz()">
                            <i class="fas fa-check"></i> Kiểm tra đáp án
                        </button>
                        
                        <div class="result" id="quizResult">
                            <strong>Kết quả:</strong>
                            <div class="result-content" id="quizResultContent"></div>
                        </div>
                    </div>

                    <div class="success-box">
                        <h4><i class="fas fa-graduation-cap"></i> Tổng kết buổi học</h4>
                        <p>Sau buổi học này, bạn đã hiểu:</p>
                        <ol>
                            <li><strong>Design Pattern</strong> là gì và tại sao cần dùng</li>
                            <li><strong>Singleton Pattern</strong> - Đảm bảo chỉ có 1 instance duy nhất</li>
                            <li><strong>Factory Method Pattern</strong> - Tạo object ẩn chi tiết khởi tạo</li>
                            <li><strong>Simple Factory Pattern</strong> - Phiên bản đơn giản của Factory</li>
                            <li>Khi nào nên dùng mỗi pattern và ưu nhược điểm của chúng</li>
                        </ol>
                    </div>
                </section>
            </main>
        </div>

        <footer>
              <p> Giáo trình Java- TSingleton & Factory Pattern © GV: Nguyễn Đình Mạnh</p>
        </footer>
    </div>

    <script>
        // Xử lý điều hướng
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.section');

            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();

                    // Xóa class active từ tất cả các link và section
                    navLinks.forEach(item => item.classList.remove('active'));
                    sections.forEach(section => section.classList.remove('active'));

                    // Thêm class active cho link được click
                    this.classList.add('active');

                    // Hiển thị section tương ứng
                    const targetId = this.getAttribute('href').substring(1);
                    document.getElementById(targetId).classList.add('active');
                });
            });
        });

        // Hàm copy code
        function copyCode(button) {
            const codeBlock = button.parentElement.parentElement;
            const text = codeBlock.innerText;
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Đã copy!';
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            });
        }

        // Thử nghiệm Singleton Pattern
        function testSingleton() {
            const result = document.getElementById('singletonResult');
            const output = document.getElementById('singletonResultContent');

            result.classList.add('active');

            let outputText = `=== DEMO SINGLETON PATTERN ===\n\n`;
            outputText += `Singleton s1 = Singleton.getInstance();\n`;
            outputText += `Singleton s2 = Singleton.getInstance();\n`;
            outputText += `Singleton s3 = Singleton.getInstance();\n\n`;
            outputText += `Kết quả so sánh:\n`;
            outputText += `s1 == s2: true (cùng instance)\n`;
            outputText += `s2 == s3: true (cùng instance)\n\n`;
            outputText += `Chỉ có 1 instance được tạo:\n`;
            outputText += `Singleton instance được tạo!\n`;
            outputText += `Hello từ Singleton!\n\n`;
            outputText += `=> Tất cả biến s1, s2, s3 đều trỏ đến cùng 1 instance.`;

            output.textContent = outputText;
        }

        // Thử nghiệm Factory Method
        function testFactoryMethod() {
            const animalType = document.getElementById('animalType').value;
            const result = document.getElementById('factoryMethodResult');
            const output = document.getElementById('factoryMethodResultContent');

            result.classList.add('active');

            let outputText = `=== DEMO FACTORY METHOD PATTERN ===\n\n`;
            outputText += `Animal animal = AnimalFactory.createAnimal("${animalType}");\n\n`;
            
            let sound = "";
            if (animalType === "dog") {
                sound = "Gâu gâu!";
            } else if (animalType === "cat") {
                sound = "Meo meo!";
            } else if (animalType === "duck") {
                sound = "Quạc quạc! (Giả sử đã thêm lớp Duck)";
            }
            
            outputText += `animal.sound();\n`;
            outputText += `Kết quả: ${sound}\n\n`;
            outputText += `Ưu điểm:\n`;
            outputText += `- Client không cần biết Dog, Cat, Duck được tạo thế nào\n`;
            outputText += `- Dễ thêm loại mới: thêm lớp và cập nhật Factory\n`;
            outputText += `- Giảm sự phụ thuộc giữa các lớp`;

            output.textContent = outputText;
        }

        // Thử nghiệm Simple Factory
        function testSimpleFactory() {
            const shapeType = document.getElementById('shapeType').value;
            const result = document.getElementById('simpleFactoryResult');
            const output = document.getElementById('simpleFactoryResultContent');

            result.classList.add('active');

            let outputText = `=== DEMO SIMPLE FACTORY PATTERN ===\n\n`;
            outputText += `Shape shape = ShapeFactory.createShape("${shapeType}");\n\n`;
            
            if (shapeType === "circle") {
                outputText += `shape.draw();\n`;
                outputText += `Kết quả: Vẽ hình tròn\n\n`;
            } else if (shapeType === "rectangle") {
                outputText += `shape.draw();\n`;
                outputText += `Kết quả: Vẽ hình chữ nhật\n\n`;
            } else if (shapeType === "triangle") {
                outputText += `shape.draw();\n`;
                outputText += `Kết quả: IllegalArgumentException: Loại hình không hợp lệ: triangle\n\n`;
                outputText += `=> Simple Factory có thể xử lý lỗi khi type không hợp lệ`;
            }
            
            outputText += `So sánh với Factory Method:\n`;
            outputText += `- Simple Factory: 1 class làm tất cả\n`;
            outputText += `- Factory Method: Mỗi lớp con có factory riêng\n`;
            outputText += `- Simple Factory phù hợp project nhỏ, ít thay đổi`;

            output.textContent = outputText;
        }

        // Kiểm tra quiz
        function checkQuiz() {
            const q1 = document.getElementById('q1').value;
            const q2 = document.getElementById('q2').value;
            const q3 = document.getElementById('q3').value;
            
            const result = document.getElementById('quizResult');
            const output = document.getElementById('quizResultContent');
            
            result.classList.add('active');
            
            let score = 0;
            let outputText = `=== KẾT QUẢ TRẮC NGHIỆM ===\n\n`;
            
            // Câu 1
            outputText += `1. Singleton Pattern đảm bảo:\n`;
            outputText += `   Đáp án của bạn: ${q1}\n`;
            if (q1 === 'b') {
                outputText += `   ✅ ĐÚNG - Chỉ có một instance duy nhất\n`;
                score++;
            } else {
                outputText += `   ❌ SAI - Đáp án đúng: b (Chỉ có một instance duy nhất)\n`;
            }
            
            // Câu 2
            outputText += `\n2. Factory Pattern dùng để:\n`;
            outputText += `   Đáp án của bạn: ${q2}\n`;
            if (q2 === 'b') {
                outputText += `   ✅ ĐÚNG - Tạo object mà không cần chỉ định lớp cụ thể\n`;
                score++;
            } else {
                outputText += `   ❌ SAI - Đáp án đúng: b (Tạo object mà không cần chỉ định lớp cụ thể)\n`;
            }
            
            // Câu 3
            outputText += `\n3. Constructor của Singleton phải là:\n`;
            outputText += `   Đáp án của bạn: ${q3}\n`;
            if (q3 === 'b') {
                outputText += `   ✅ ĐÚNG - Private (để ngăn tạo instance từ bên ngoài)\n`;
                score++;
            } else {
                outputText += `   ❌ SAI - Đáp án đúng: b (Private)\n`;
            }
            
            outputText += `\n=== TỔNG KẾT ===\n`;
            outputText += `Số câu đúng: ${score}/3\n`;
            
            if (score === 3) {
                outputText += `🎉 Xuất sắc! Bạn đã hiểu rõ về Singleton và Factory Pattern!`;
            } else if (score === 2) {
                outputText += `👍 Tốt! Hãy ôn tập lại một chút nữa.`;
            } else {
                outputText += `📚 Cần ôn tập lại bài học về Singleton và Factory Pattern.`;
            }
            
            output.textContent = outputText;
        }
    </script>
</body>
</html>